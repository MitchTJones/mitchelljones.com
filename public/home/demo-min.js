!function(){const e=255,t=6,o=0;var c,p,r,u,v,l,f,s,m,g,w,I,h=document.getElementById("top"),V=!1;function E(){return{p:new Vector(0,0),v:new Vector(0,0)}}function B(e,n){var t=E();return t.o=new Vector(e,n),t.p=new Vector(e,n),t}h.addEventListener("mousemove",function(e){I=c.getBoundingClientRect(),v.p.set(e.clientX-I.left,e.clientY-I.top),u||(r.p=v.p.clone(),u=!0)}),h.addEventListener("mousedown",function(){!1,l=!0}),h.addEventListener("mouseup",function(){f=!0,l=!1}),init("demo",function(e,n){for(p=n,0,s=[],g=(c=e).width,w=c.height,I=c.getBoundingClientRect(),{x:g/2,y:w/2},!1,l=!1,f=!1,v=E(),r=E(),u=!1,y=-o;y<w+o;y+=t)for(x=-o;x<g+o;x+=t)s.push(B(x,y));m=s.length,pI=void 0},function(){0;var t=v.p.clone();v.v=vel(r.p,t);var o=v.v.pyth()/20;if(!V||o>0||l||f||"undefined"==typeof pI){for(V=!0,d=(i=p.createImageData(g,w)).data,a=0;a<m;a++){n=s[a];var c=n.p,u=n.o;f?n.v.add(velToPoint(c,t,25).times(-1)):l?n.v.add(velToPoint(c,t,2.5)):n.v.add(velToPoint(c,t,o)),n.p.add(n.v.mult(.95)),dist(c,u)<=1?c=u.clone():(V=!1,n.p.add((y=u,x=c,I=.2,dist(y,x)>0?new Vector((y.x-x.x)*I,(y.y-x.y)*I):new Vector(0,0)))),c.x>0&&c.y>0&&c.x<g&&c.y<w&&(d[b=4*(~~c.x+~~c.y*g)]=d[b+1]=d[b+2]=e,d[b+3]=200)}p.putImageData(i,0,0),pI=i,r.p=v.p.clone(),f=!1}else p.putImageData(pI,0,0);var y,x,I})}();