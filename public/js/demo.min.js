!function(){let e,t,o,c,p,l,u,r,v,f,m,s,g,w,I,h=document.getElementById("top"),V=!1;function E(){return{p:new Vector(0,0),v:new Vector(0,0)}}function B(e,t){let n=E();return n.o=new Vector(e,t),n.p=new Vector(e,t),n}h.addEventListener("mousemove",(function(t){w=e.getBoundingClientRect(),l.p.set(t.clientX-w.left,t.clientY-w.top),c||(o.p=l.p.clone(),c=!0)})),h.addEventListener("mousedown",(function(){p=!1,u=!0})),h.addEventListener("mouseup",(function(){r=!0,u=!1})),init("demo",(function(n,d){for(e=n,t=d,I=0,f=[],s=e.width,g=e.height,w=e.getBoundingClientRect(),v={x:s/2,y:g/2},p=!1,u=!1,r=!1,l=E(),o=E(),c=!1,y=-0;y<g+0;y+=6)for(x=-0;x<s+0;x+=6)f.push(B(x,y));m=f.length,pI=void 0}),(function(){I++;let e=l.p.clone();l.v=vel(o.p,e);let c=l.v.pyth()/20;if(!V||c>0||u||r||"undefined"==typeof pI){for(V=!0,d=(i=t.createImageData(s,g)).data,a=0;a<m;a++){n=f[a];let t=n.p,o=n.o;r?n.v.add(velToPoint(t,e,25).times(-1)):u?n.v.add(velToPoint(t,e,2.5)):n.v.add(velToPoint(t,e,c)),n.p.add(n.v.mult(.95)),dist(t,o)<=1?t=o.clone():(V=!1,n.p.add((p=o,v=t,y=.2,dist(p,v)>0?new Vector((p.x-v.x)*y,(p.y-v.y)*y):new Vector(0,0)))),t.x>0&&t.y>0&&t.x<s&&t.y<g&&(d[b=4*(~~t.x+~~t.y*s)]=d[b+1]=d[b+2]=255,d[b+3]=200)}t.putImageData(i,0,0),pI=i,o.p=l.p.clone(),r=!1}else t.putImageData(pI,0,0);var p,v,y}))}();